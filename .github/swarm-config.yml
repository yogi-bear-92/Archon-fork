# 🤖 GitHub Swarm Configuration for Automated PR Management
# Configuration file for Claude Flow GitHub Swarm integration

# Swarm Topology Settings
swarm:
  topology: hierarchical
  max_agents: 5
  coordination_mode: intelligent
  safety_level: maximum
  
# GitHub Integration Settings  
github:
  pr_monitoring: true
  auto_merge_enabled: true
  notification_level: comprehensive
  branch_protection: true
  
# Agent Configuration
agents:
  pr_analyzer:
    type: github-pr-analyzer
    priority: high
    capabilities:
      - status_check_validation
      - merge_conflict_detection
      - branch_protection_verification
      - commit_analysis
      
  container_validator:
    type: container-validator
    priority: high
    capabilities:
      - health_check_validation
      - service_startup_verification
      - dependency_validation
      - performance_monitoring
      
  merge_coordinator:
    type: merge-coordinator
    priority: critical
    capabilities:
      - merge_decision_making
      - method_selection
      - safety_assessment
      - post_merge_coordination
      
  notification_agent:
    type: notification-coordinator
    priority: medium
    capabilities:
      - slack_notifications
      - email_alerts
      - github_comments
      - metrics_reporting
      
  monitoring_agent:
    type: performance-monitor
    priority: low
    capabilities:
      - metrics_collection
      - performance_analysis
      - bottleneck_detection
      - optimization_suggestions

# Safety Validation Rules
safety_rules:
  minimum_safety_score: 80
  required_status_checks: true
  container_health_check: true
  merge_conflict_check: true
  branch_protection_check: true
  
  # Additional safety constraints
  constraints:
    max_changed_files: 100
    max_commits_per_pr: 20
    require_ci_success: true
    require_review_approval: false  # Optional for automated PRs
    
# Merge Strategy Configuration
merge_strategy:
  default_method: merge
  
  # Method selection rules
  rules:
    - condition: "branch == 'development' && commits > 3"
      method: squash
    - condition: "branch == 'main' && commits == 1"
      method: rebase  
    - condition: "changed_files > 50"
      method: merge
      
  # Merge message template
  message_template: |
    {title} (#{number})
    
    🤖 Auto-merged by GitHub Swarm Coordination
    👤 Author: @{author}
    🔄 {head_branch} → {base_branch}
    🛡️ Safety Score: {safety_score}/100
    🧠 Swarm Session: {session_id}
    
    ✅ All automated safety checks passed
    
    🚀 Generated with Claude Code
    Co-Authored-By: GitHub Swarm <swarm@github.com>

# Monitoring Configuration
monitoring:
  enabled: true
  interval_minutes: 15
  metrics_retention_days: 30
  
  # Alert thresholds
  alerts:
    high_failure_rate: 0.2
    slow_merge_time: 30  # minutes
    excessive_conflicts: 5
    
# Notification Configuration
notifications:
  github_comments: true
  github_status_checks: true
  
  # External notifications (requires secrets)
  slack:
    enabled: false  # Set to true and configure webhook URL in secrets
    channel: "#deployments"
    
  email:
    enabled: false  # Set to true and configure SMTP in secrets
    recipients: []

# Feature Flags
features:
  neural_pattern_analysis: true
  performance_optimization: true
  intelligent_batching: true
  cross_session_memory: true
  
# Security Settings
security:
  require_signed_commits: false
  scan_for_secrets: true
  validate_dependencies: true
  check_vulnerability_alerts: true
  
# Performance Tuning
performance:
  parallel_validation: true
  cache_status_checks: true
  batch_operations: true
  optimize_api_calls: true